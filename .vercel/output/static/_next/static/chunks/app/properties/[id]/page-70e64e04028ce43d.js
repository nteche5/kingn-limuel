(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[968],{109:(e,t,s)=>{"use strict";s.d(t,{default:()=>u});var a=s(5155),r=s(8661),l=s.n(r),n=s(2115),i=s(5921),c=s(3511),o=s(2068),d=s(5130),m=s(9867),x=s(1397),h=s(1166);let u=e=>{let{videoUrl:t,title:s,posterUrl:r}=e,[u,p]=(0,n.useState)(!1),[f,b]=(0,n.useState)(!0),[g,j]=(0,n.useState)(0),[y,N]=(0,n.useState)(0),[w,v]=(0,n.useState)(!0),[k,A]=(0,n.useState)(!0),[C,D]=(0,n.useState)(null),T=(0,n.useRef)(null),S=(0,n.useRef)(null),_=()=>{if(S.current)if(u)S.current.pause(),p(!1);else{let e=S.current.play();void 0!==e?e.then(()=>p(!0)).catch(()=>p(!1)):p(!0)}},F=()=>{S.current&&(S.current.muted=!f,b(!f))},L=e=>{let t=Math.floor(e/60),s=Math.floor(e%60);return"".concat(t,":").concat(s.toString().padStart(2,"0"))},R=()=>{S.current&&S.current.requestFullscreen&&S.current.requestFullscreen()};return(0,a.jsxs)("div",{onMouseMove:()=>{A(!0),T.current&&window.clearTimeout(T.current),T.current=window.setTimeout(()=>{A(!1)},2e3)},onKeyDown:e=>{if(" "===e.key)e.preventDefault(),_();else if("m"===e.key.toLowerCase())F();else if("f"===e.key.toLowerCase())R();else if("ArrowLeft"===e.key){if(S.current){let e=Math.max(0,S.current.currentTime-5);S.current.currentTime=e,j(e)}}else if("ArrowRight"===e.key&&S.current){let e=Math.min(y,S.current.currentTime+5);S.current.currentTime=e,j(e)}},tabIndex:0,className:"jsx-bed009ff3266705 relative w-full aspect-video bg-black rounded-lg overflow-hidden",children:[(0,a.jsxs)("video",{ref:S,onTimeUpdate:()=>{S.current&&j(S.current.currentTime)},onLoadedMetadata:()=>{S.current&&N(S.current.duration)},onLoadedData:()=>{v(!1)},onPlay:()=>p(!0),onPause:()=>p(!1),onError:()=>{v(!1),D("Unable to load video")},poster:r||"/images/video-poster.jpg",preload:"metadata",playsInline:!0,muted:f,className:"jsx-bed009ff3266705 absolute inset-0 w-full h-full object-cover",children:[(0,a.jsx)("source",{src:t,type:"video/mp4",className:"jsx-bed009ff3266705"}),"Your browser does not support the video tag."]}),w&&!C&&(0,a.jsx)("div",{className:"jsx-bed009ff3266705 absolute inset-0 flex items-center justify-center",children:(0,a.jsx)("div",{className:"jsx-bed009ff3266705 w-12 h-12 border-4 border-white/30 border-t-white rounded-full animate-spin"})}),C&&(0,a.jsx)("div",{className:"jsx-bed009ff3266705 absolute inset-0 flex items-center justify-center",children:(0,a.jsx)("div",{className:"jsx-bed009ff3266705 px-4 py-2 bg-red-600 text-white rounded-md shadow-lg",children:C})}),!u&&!w&&!C&&(0,a.jsx)("div",{className:"jsx-bed009ff3266705 absolute inset-0 flex items-center justify-center",children:(0,a.jsx)(h.$,{onClick:_,className:"bg-black bg-opacity-50 hover:bg-opacity-75 text-white p-4 rounded-full",children:(0,a.jsx)(i.A,{className:"h-8 w-8 ml-1"})})}),(0,a.jsxs)("div",{className:"jsx-bed009ff3266705 "+"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black to-transparent p-4 transition-opacity duration-300 ".concat(k?"opacity-100":"opacity-0"),children:[(0,a.jsx)("div",{className:"jsx-bed009ff3266705 mb-3",children:(0,a.jsx)("input",{type:"range",min:"0",max:y||0,value:g,onChange:e=>{if(S.current){let t=parseFloat(e.target.value);S.current.currentTime=t,j(t)}},className:"jsx-bed009ff3266705 w-full h-1 bg-gray-600 rounded-lg appearance-none cursor-pointer slider"})}),(0,a.jsxs)("div",{className:"jsx-bed009ff3266705 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"jsx-bed009ff3266705 flex items-center space-x-3",children:[(0,a.jsx)(h.$,{onClick:_,variant:"ghost",size:"sm",className:"text-white hover:bg-white hover:bg-opacity-20",children:u?(0,a.jsx)(c.A,{className:"h-4 w-4"}):(0,a.jsx)(i.A,{className:"h-4 w-4"})}),(0,a.jsx)(h.$,{onClick:F,variant:"ghost",size:"sm",className:"text-white hover:bg-white hover:bg-opacity-20",children:f?(0,a.jsx)(o.A,{className:"h-4 w-4"}):(0,a.jsx)(d.A,{className:"h-4 w-4"})}),(0,a.jsxs)("span",{className:"jsx-bed009ff3266705 text-white text-sm",children:[L(g)," / ",L(y)]})]}),(0,a.jsxs)("div",{className:"jsx-bed009ff3266705 flex items-center space-x-1",children:[(0,a.jsx)(h.$,{onClick:()=>{try{let e=document.createElement("a");e.href=t,e.download="".concat(s||"video",".mp4"),e.target="_blank",e.rel="noopener",document.body.appendChild(e),e.click(),document.body.removeChild(e)}catch(e){window.open(t,"_blank")}},variant:"ghost",size:"sm",className:"text-white hover:bg-white hover:bg-opacity-20",children:(0,a.jsx)(m.A,{className:"h-4 w-4"})}),(0,a.jsx)(h.$,{onClick:R,variant:"ghost",size:"sm",className:"text-white hover:bg-white hover:bg-opacity-20",children:(0,a.jsx)(x.A,{className:"h-4 w-4"})})]})]})]}),(0,a.jsx)(l(),{id:"bed009ff3266705",children:".slider.jsx-bed009ff3266705::-webkit-slider-thumb{appearance:none;height:16px;width:16px;border-radius:50%;background:#3b82f6;cursor:pointer}.slider.jsx-bed009ff3266705::-moz-range-thumb{height:16px;width:16px;border-radius:50%;background:#3b82f6;cursor:pointer;border:none}"})]})}},1166:(e,t,s)=>{"use strict";s.d(t,{$:()=>n});var a=s(5155),r=s(2115),l=s(4269);let n=r.forwardRef((e,t)=>{let{className:s,variant:r="primary",size:n="md",...i}=e;return(0,a.jsx)("button",{className:(0,l.cn)("btn",{"btn-primary":"primary"===r,"btn-secondary":"secondary"===r,"btn-outline":"outline"===r,"btn-ghost":"ghost"===r,"btn-sm":"sm"===n,"btn-md":"md"===n,"btn-lg":"lg"===n},s),ref:t,...i})});n.displayName="Button"},4207:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2619,23)),Promise.resolve().then(s.bind(s,4318)),Promise.resolve().then(s.bind(s,6514)),Promise.resolve().then(s.bind(s,109))},4269:(e,t,s)=>{"use strict";s.d(t,{$:()=>n,Y:()=>i,cn:()=>l});var a=s(2821),r=s(5889);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}function n(e){return new Intl.NumberFormat("en-GH",{style:"currency",currency:"GHS",minimumFractionDigits:0}).format(e)}function i(e){return new Intl.DateTimeFormat("en-GB",{year:"numeric",month:"long",day:"numeric"}).format(e)}},4318:(e,t,s)=>{"use strict";s.d(t,{default:()=>b});var a=s(5155),r=s(2115),l=s(2619),n=s.n(l),i=s(5626),c=s(1873),o=s(9867),d=s(9715),m=s(9141),x=s(3664),h=s(7972),u=s(6514),p=s(109),f=s(4269);function b(e){var t;let{id:s}=e,[l,b]=(0,r.useState)(null),[g,j]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{let e=async()=>{j(!0);try{let e=await fetch("/api/properties/".concat(s),{cache:"no-store"});if(e.ok){let t=await e.json();if(null==t?void 0:t.property){let e=t.property;b({...e,createdAt:new Date(e.createdAt||e.created_at||Date.now())});return}}let t=localStorage.getItem("king-limuel-properties");if(!t)return void b(null);let a=JSON.parse(t).find(e=>e.id===s);if(!a)return void b(null);let r={...a,createdAt:new Date(a.createdAt)};b(r)}catch(e){console.error("Failed to load uploaded property:",e),b(null)}finally{j(!1)}};e();let t=()=>e();return window.addEventListener("propertiesUpdated",t),()=>window.removeEventListener("propertiesUpdated",t)},[s]),g)?(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[(0,a.jsxs)(n(),{href:"/properties",className:"btn btn-ghost mb-4 inline-flex items-center",children:[(0,a.jsx)(i.A,{className:"h-4 w-4 mr-2"})," Back to properties"]}),(0,a.jsx)("div",{className:"text-center py-24 text-gray-600",children:"Loading property..."})]}):l?(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-6 space-y-6",children:[(0,a.jsxs)(n(),{href:"/properties",className:"btn btn-ghost inline-flex items-center w-fit",children:[(0,a.jsx)(i.A,{className:"h-4 w-4 mr-2"})," Back"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:l.title}),(0,a.jsxs)("div",{className:"flex items-center text-gray-600 mt-2",children:[(0,a.jsx)(c.A,{className:"h-4 w-4 mr-1"}),(0,a.jsx)("span",{children:l.location})]})]}),(0,a.jsx)(u.default,{images:l.images,title:l.title}),(0,a.jsx)(h.Zp,{children:(0,a.jsx)(h.Wu,{className:"p-0",children:l.video?(0,a.jsx)(p.default,{videoUrl:l.video,title:l.title,posterUrl:null==(t=l.images)?void 0:t[0]}):(0,a.jsx)("div",{className:"aspect-video flex items-center justify-center text-gray-500 bg-gray-100",children:"No video provided"})})}),(0,a.jsx)(h.Zp,{children:(0,a.jsxs)(h.Wu,{className:"p-6 space-y-3",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Description"}),(0,a.jsx)("p",{className:"text-gray-700 whitespace-pre-line",children:l.description})]})}),(0,a.jsx)(h.Zp,{className:"lg:hidden",children:(0,a.jsxs)(h.Wu,{className:"p-6 space-y-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Documents"}),l.landTitleCertification||l.proofDocument?(0,a.jsxs)("a",{href:l.landTitleCertification||l.proofDocument,target:"_blank",rel:"noopener noreferrer",download:!0,className:"w-full inline-flex items-center justify-center space-x-2 px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white transition-colors",children:[(0,a.jsx)(o.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Download Land Title Certificate"})]}):(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"No land title certificate available."}),Array.isArray(l.ownershipDocuments)&&l.ownershipDocuments.length>0&&(0,a.jsx)("div",{className:"space-y-2",children:l.ownershipDocuments.map((e,t)=>(0,a.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",download:!0,className:"w-full inline-flex items-center justify-between px-3 py-2 rounded-lg border border-gray-200 hover:bg-gray-50 text-gray-700",children:[(0,a.jsxs)("span",{className:"inline-flex items-center space-x-2",children:[(0,a.jsx)(d.A,{className:"h-4 w-4 text-blue-600"}),(0,a.jsx)("span",{className:"truncate max-w-[220px]",children:e.name||"Document"})]}),(0,a.jsx)(o.A,{className:"h-4 w-4 text-gray-500"})]},"".concat(e.url,"-").concat(t)))})]})})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(h.Zp,{children:(0,a.jsxs)(h.Wu,{className:"p-6 space-y-2",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-primary-600",children:(0,f.$)(l.price)}),(0,a.jsxs)("div",{className:"text-gray-600 capitalize",children:[l.propertyType," for ",l.purpose]}),(0,a.jsxs)("div",{className:"text-gray-500",children:["Listed ",(0,f.Y)(l.createdAt)]})]})}),(0,a.jsx)(h.Zp,{children:(0,a.jsxs)(h.Wu,{className:"p-6 space-y-3",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Contact"}),(0,a.jsxs)("div",{className:"flex items-center text-gray-700",children:[(0,a.jsx)(m.A,{className:"h-4 w-4 mr-2"})," ",l.contact.phone]}),(0,a.jsxs)("div",{className:"flex items-center text-gray-700",children:[(0,a.jsx)(x.A,{className:"h-4 w-4 mr-2"})," ",l.contact.email]}),(0,a.jsx)("a",{className:"btn btn-primary w-full mt-2 text-center",href:"https://wa.me/".concat(l.contact.phone.replace(/\D/g,"")),target:"_blank",rel:"noopener noreferrer",children:"Chat on WhatsApp"})]})}),(0,a.jsx)(h.Zp,{className:"hidden lg:block",children:(0,a.jsxs)(h.Wu,{className:"p-6 space-y-3",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Documents"}),l.landTitleCertification||l.proofDocument?(0,a.jsxs)("a",{href:l.landTitleCertification||l.proofDocument,target:"_blank",rel:"noopener noreferrer",download:!0,className:"w-full inline-flex items-center justify-center space-x-2 px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white transition-colors",children:[(0,a.jsx)(o.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Download Land Title Certificate"})]}):(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"No land title certificate available."}),Array.isArray(l.ownershipDocuments)&&l.ownershipDocuments.length>0&&(0,a.jsx)("div",{className:"space-y-2",children:l.ownershipDocuments.map((e,t)=>(0,a.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",download:!0,className:"w-full inline-flex items-center justify-between px-3 py-2 rounded-lg border border-gray-200 hover:bg-gray-50 text-gray-700",children:[(0,a.jsxs)("span",{className:"inline-flex items-center space-x-2",children:[(0,a.jsx)(d.A,{className:"h-4 w-4 text-blue-600"}),(0,a.jsx)("span",{className:"truncate max-w-[220px]",children:e.name||"Document"})]}),(0,a.jsx)(o.A,{className:"h-4 w-4 text-gray-500"})]},"".concat(e.url,"-").concat(t)))})]})})]})]})]}):(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[(0,a.jsxs)(n(),{href:"/properties",className:"btn btn-ghost mb-4 inline-flex items-center",children:[(0,a.jsx)(i.A,{className:"h-4 w-4 mr-2"})," Back to properties"]}),(0,a.jsx)("div",{className:"text-center py-24 text-gray-600",children:"Property not found"})]})}},6514:(e,t,s)=>{"use strict";s.d(t,{default:()=>o});var a=s(5155),r=s(2115),l=s(5239),n=s(368),i=s(7937),c=s(5229);let o=e=>{let{images:t,title:s}=e,[o,d]=(0,r.useState)(0),[m,x]=(0,r.useState)(!1),h=()=>{d(e=>(e+1)%t.length)},u=()=>{d(e=>(e-1+t.length)%t.length)};return t&&0!==t.length?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"relative w-full h-64 sm:h-80 md:h-96 rounded-lg overflow-hidden bg-gray-200",children:[(0,a.jsx)(l.default,{src:t[o]||"/images/placeholder.jpg",alt:"".concat(s," - Image ").concat(o+1),fill:!0,className:"object-cover cursor-pointer hover:scale-105 transition-transform duration-300",onClick:()=>{x(!0)}}),t.length>1&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:u,className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75 transition-opacity",children:(0,a.jsx)(n.A,{className:"h-5 w-5"})}),(0,a.jsx)("button",{onClick:h,className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75 transition-opacity",children:(0,a.jsx)(i.A,{className:"h-5 w-5"})})]}),t.length>1&&(0,a.jsxs)("div",{className:"absolute bottom-4 right-4 bg-black bg-opacity-50 text-white px-3 py-1 rounded-full text-sm",children:[o+1," / ",t.length]})]}),t.length>1&&(0,a.jsx)("div",{className:"grid grid-cols-4 gap-2 sm:gap-3",children:t.map((e,t)=>(0,a.jsx)("div",{className:"relative h-14 sm:h-16 md:h-20 rounded-lg overflow-hidden cursor-pointer border-2 transition-colors ".concat(t===o?"border-primary-500":"border-transparent"),onClick:()=>d(t),children:(0,a.jsx)(l.default,{src:e||"/images/placeholder.jpg",alt:"".concat(s," - Thumbnail ").concat(t+1),fill:!0,className:"object-cover"})},t))})]}),m&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"relative max-w-4xl max-h-full",children:[(0,a.jsx)("button",{onClick:()=>{x(!1)},className:"absolute top-4 right-4 z-10 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75 transition-opacity",children:(0,a.jsx)(c.A,{className:"h-6 w-6"})}),(0,a.jsx)("div",{className:"relative w-full h-72 sm:h-96 md:h-[500px]",children:(0,a.jsx)(l.default,{src:t[o]||"/images/placeholder.jpg",alt:"".concat(s," - Full size ").concat(o+1),fill:!0,className:"object-contain"})}),t.length>1&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:u,className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-3 rounded-full hover:bg-opacity-75 transition-opacity",children:(0,a.jsx)(n.A,{className:"h-6 w-6"})}),(0,a.jsx)("button",{onClick:h,className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-3 rounded-full hover:bg-opacity-75 transition-opacity",children:(0,a.jsx)(i.A,{className:"h-6 w-6"})})]})]})})]}):(0,a.jsx)("div",{className:"w-full h-64 bg-gray-200 rounded-lg flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-gray-500",children:"No images available"})})}},7972:(e,t,s)=>{"use strict";s.d(t,{Wu:()=>o,ZB:()=>c,Zp:()=>n,aR:()=>i});var a=s(5155),r=s(2115),l=s(4269);let n=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("card",s),...r})});n.displayName="Card";let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",s),...r})});i.displayName="CardHeader";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h3",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});c.displayName="CardTitle",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",s),...r})}).displayName="CardDescription";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",s),...r})});o.displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter"}},e=>{e.O(0,[997,619,55,816,441,255,358],()=>e(e.s=4207)),_N_E=e.O()}]);