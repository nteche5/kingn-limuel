(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[754],{63:(e,r,s)=>{"use strict";var a=s(7260);s.o(a,"usePathname")&&s.d(r,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(r,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(r,{useSearchParams:function(){return a.useSearchParams}})},2317:(e,r,s)=>{Promise.resolve().then(s.bind(s,6255))},6255:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>m});var a=s(5155),t=s(2115),i=s(63),l=s(4891),o=s(2512),n=s(5105);let c=(0,n.A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),d=(0,n.A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),p=(0,n.A)("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),u=(0,n.A)("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);function x(){let e=(0,i.useSearchParams)(),[r,s]=(0,t.useState)([]),[n,x]=(0,t.useState)("grid"),[m,h]=(0,t.useState)(!1),[y,g]=(0,t.useState)(0),[v,b]=(0,t.useState)({location:e.get("location")||"",propertyType:e.get("type")||void 0,purpose:e.get("purpose")||void 0,minPrice:void 0,maxPrice:void 0});(0,t.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/api/properties",{cache:"no-store"});if(e.ok){let r=await e.json();if(Array.isArray(null==r?void 0:r.properties)&&r.properties.length>0)return void s(r.properties.map(e=>({...e,createdAt:new Date(e.createdAt||e.created_at||Date.now())})))}}catch(e){}s((0,o.Xc)())};e();let r=r=>{("hide-default-properties"===r.key||"king-limuel-properties"===r.key)&&e()},a=()=>{e()};return window.addEventListener("storage",r),window.addEventListener("propertiesUpdated",a),()=>{window.removeEventListener("storage",r),window.removeEventListener("propertiesUpdated",a)}},[y]),(0,t.useEffect)(()=>{b({location:e.get("location")||"",propertyType:e.get("type")||void 0,purpose:e.get("purpose")||void 0,minPrice:void 0,maxPrice:void 0})},[e]);let j=e=>{try{(0,o.BJ)(e);let r=(0,o.Xc)();s(r),window.dispatchEvent(new CustomEvent("propertiesUpdated"))}catch(e){console.error("Error deleting property:",e),alert("Error deleting property. Please try again.")}},f=(0,t.useMemo)(()=>r.filter(e=>(!v.location||e.location.toLowerCase()===v.location.toLowerCase())&&(!v.propertyType||e.propertyType===v.propertyType)&&(!v.purpose||e.purpose===v.purpose)&&(!v.minPrice||!(e.price<v.minPrice))&&(!v.maxPrice||!(e.price>v.maxPrice))),[r,v]),N=(e,r)=>{b(s=>({...s,[e]:r}))};return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Properties"}),(0,a.jsxs)("p",{className:"text-gray-600",children:[f.length," properties found"]}),(v.propertyType||v.purpose||v.location)&&(0,a.jsxs)("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-blue-800 mb-2",children:"Active Filters:"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[v.propertyType&&(0,a.jsxs)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:["Type: ",v.propertyType]}),v.purpose&&(0,a.jsxs)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:["Purpose: ",v.purpose]}),v.location&&(0,a.jsxs)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:["Location: ",v.location]})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8",children:[(0,a.jsx)("div",{className:"lg:w-80 ".concat(m?"block":"hidden lg:block"),children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 sticky top-24",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Filters"}),(0,a.jsx)("button",{onClick:()=>{b({location:"",propertyType:void 0,purpose:void 0,minPrice:void 0,maxPrice:void 0})},className:"text-sm text-primary-600 hover:text-primary-700",children:"Clear All"})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),(0,a.jsxs)("select",{value:v.location||"",onChange:e=>N("location",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,a.jsx)("option",{value:"",children:"All Locations"}),(0,a.jsx)("option",{value:"tamale-central",children:"Tamale Central"}),(0,a.jsx)("option",{value:"sagnarigu",children:"Sagnarigu"}),(0,a.jsx)("option",{value:"nyohini",children:"Nyohini"}),(0,a.jsx)("option",{value:"vittin",children:"Vittin (Viting)"}),(0,a.jsx)("option",{value:"aboabo",children:"Aboabo"}),(0,a.jsx)("option",{value:"kalpohin-estate",children:"Kalpohin (Estate)"}),(0,a.jsx)("option",{value:"kalpohin-low-cost",children:"Kalpohin (Low-Cost)"}),(0,a.jsx)("option",{value:"kobilmahagu",children:"Kobilmahagu"}),(0,a.jsx)("option",{value:"gumani",children:"Gumani"}),(0,a.jsx)("option",{value:"zagyuri",children:"Zagyuri"}),(0,a.jsx)("option",{value:"kakpagyili",children:"Kakpagyili"}),(0,a.jsx)("option",{value:"sakasaka",children:"Sakasaka"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property Type"}),(0,a.jsxs)("select",{value:v.propertyType||"",onChange:e=>N("propertyType",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,a.jsx)("option",{value:"",children:"All Types"}),(0,a.jsx)("option",{value:"land",children:"Land"}),(0,a.jsx)("option",{value:"house",children:"House"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Purpose"}),(0,a.jsxs)("select",{value:v.purpose||"",onChange:e=>N("purpose",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,a.jsx)("option",{value:"",children:"All Purposes"}),(0,a.jsx)("option",{value:"buy",children:"Buy"}),(0,a.jsx)("option",{value:"rent",children:"Rent"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price Range (GHS)"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("input",{type:"number",placeholder:"Min Price",value:v.minPrice||"",onChange:e=>N("minPrice",e.target.value?Number(e.target.value):void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),(0,a.jsx)("input",{type:"number",placeholder:"Max Price",value:v.maxPrice||"",onChange:e=>N("maxPrice",e.target.value?Number(e.target.value):void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]})]})]})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("button",{onClick:()=>{g(e=>e+1)},className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50",title:"Refresh properties list",children:[(0,a.jsx)(c,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Refresh"})]}),(0,a.jsxs)("button",{onClick:()=>h(!m),className:"lg:hidden flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50",children:[(0,a.jsx)(d,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Filters"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>x("grid"),className:"p-2 rounded-md ".concat("grid"===n?"bg-primary-100 text-primary-600":"text-gray-400 hover:text-gray-600"),children:(0,a.jsx)(p,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>x("list"),className:"p-2 rounded-md ".concat("list"===n?"bg-primary-100 text-primary-600":"text-gray-400 hover:text-gray-600"),children:(0,a.jsx)(u,{className:"h-4 w-4"})})]})]}),f.length>0?(0,a.jsx)("div",{className:"grid gap-6 ".concat("grid"===n?"grid-cols-1 md:grid-cols-2 xl:grid-cols-3":"grid-cols-1"),children:f.map(e=>(0,a.jsx)(l.A,{property:e,onDelete:j,showDelete:!0},e.id))}):(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-gray-400 mb-4",children:(0,a.jsx)("svg",{className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No properties found"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Try adjusting your filters to see more results."})]})]})]})]})})}function m(){return(0,a.jsx)(t.Suspense,{children:(0,a.jsx)(x,{})})}}},e=>{e.O(0,[997,619,55,598,441,255,358],()=>e(e.s=2317)),_N_E=e.O()}]);